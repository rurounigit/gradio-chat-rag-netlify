<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Minimal ChatInterface Test (.launch())</title>

    <!-- Load Gradio-lite JS and CSS from CDN (latest) -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@gradio/theme/dist/theme.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@gradio/lite/dist/lite.css"
    />
    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/@gradio/lite/dist/lite.js"
    ></script>

    <style>
      body { margin: 0; padding: 0; background-color: #f0f0f0; }
      gradio-lite { min-height: 100vh; }
    </style>
  </head>
  <body>
    <gradio-lite>
      <script type="pyodide">
import gradio as gr
# NO asyncio, json, or pyodide_http

print("Minimal ChatInterface Test: Starting Python code.")

# Define a simple SYNCHRONOUS function
# NOTE: The history format is different for type="messages"
def simple_chat_placeholder(message, history):
    print(f"Simple Chat Placeholder: Received message='{message}', history={history}")
    # History is like: [{"role": "user", "content": "..."}, {"role": "assistant", "content": "..."}]
    response = f"Echo: {message}"
    print(f"Simple Chat Placeholder: Returning '{response}'")
    return response

# Define the ChatInterface using the placeholder function
chat_ui = gr.ChatInterface(
    fn=simple_chat_placeholder,
    title="Minimal ChatInterface Test",
    description="Testing ONLY if ChatInterface component loads with .launch()",
    type="messages", # Use recommended type
    chatbot=gr.Chatbot(height=500)
)

print("Minimal ChatInterface Test: Interface defined. Calling .launch()...")

# Use the .launch() method
chat_ui.launch()

print("Minimal ChatInterface Test: .launch() called. UI should appear if successful.")

      </script>
    </gradio-lite>
  </body>
</html>